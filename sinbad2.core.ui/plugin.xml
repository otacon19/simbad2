<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            allPopups="false"
            locationURI="menu:org.eclipse.ui.main.menu?after=additions">
         <menu
               id="flintstones.menu.file"
               label="%file.menu.name"
               mnemonic="%file.menu.mnemonic">
            <command
                  commandId="flintstones.core.io.new"
                  style="push">
            </command>
            <command
                  commandId="flintstones.core.ui.io.read"
                  style="push">
            </command>
            <command
                  commandId="flintstones.core.ui.io.save"
                  style="push">
            </command>
            <command
                  commandId="flintstones.core.ui.io.save.as"
                  style="push">
            </command>
            <command
                  commandId="flintstones.core.ui.io.save.and.close"
                  style="push">
            </command>
            <command
                  commandId="org.eclipse.ui.file.exit"
                  id="exit"
                  label="%file.command.exit.name"
                  style="push">
            </command>
         </menu>
         <menu
               id="flintstones.menu.edit"
               label="%edit.menu.name"
               mnemonic="%edit.menu.mnemonic">
            <command
                  commandId="flintstones.core.undo"
                  style="push">
            </command>
            <command
                  commandId="flintstones.core.redo"
                  style="push">
            </command>
            <command
                  commandId="org.eclipse.ui.window.preferences"
                  id="preferences"
                  label="%preferences.command.name"
                  style="push">
            </command>
         </menu>
      </menuContribution>
      <menuContribution
            allPopups="false"
            locationURI="toolbar:org.eclipse.ui.main.toolbar?after=additions">
         <toolbar
               id="sinbad2.toolbar.file"
               label="%file.toolbar.name">
            <command
                  commandId="flintstones.core.io.new"
                  style="push">
            </command>
            <command
                  commandId="flintstones.core.ui.io.read"
                  style="push">
            </command>
            <command
                  commandId="flintstones.core.ui.io.save"
                  style="push">
            </command>
            <command
                  commandId="flintstones.core.ui.io.save.and.close"
                  style="push">
            </command>
         </toolbar>
         <toolbar
               id="sinbad2.toolbar.edit"
               label="%edit.toolbar.name">
            <command
                  commandId="flintstones.core.undo"
                  style="push">
            </command>
            <command
                  commandId="flintstones.core.redo"
                  style="push">
            </command>
         </toolbar>
      </menuContribution>
   </extension>
   <extension
         point="org.eclipse.ui.commands">
      <category
            id="sinbad2.workspace.commands.category"
            name="%category.core.commands">
      </category>
      <command
            categoryId="sinbad2.workspace.commands.category"
            id="flintstones.core.io.new"
            name="%command.new">
      </command>
      <command
            categoryId="sinbad2.workspace.commands.category"
            id="flintstones.core.ui.io.read"
            name="%command.open">
      </command>
      <command
            categoryId="sinbad2.workspace.commands.category"
            id="flintstones.core.ui.io.save"
            name="%command.save">
      </command>
      <command
            categoryId="sinbad2.workspace.commands.category"
            id="flintstones.core.ui.io.save.as"
            name="%command.save.as">
      </command>
      <command
            categoryId="sinbad2.workspace.commands.category"
            id="flintstones.core.ui.io.save.and.close"
            name="%command.save.and.close">
      </command>
      <category
            id="sinbad2.ui.category_undo_redo"
            name="%category.undo.redo">
      </category>
      <command
            categoryId="sinbad2.ui.category_undo_redo"
            id="flintstones.core.undo"
            name="%command.undo">
      </command>
      <command
            categoryId="sinbad2.ui.category_undo_redo"
            id="flintstones.core.redo"
            name="%command.redo">
      </command>
   </extension>
   <extension
         point="org.eclipse.ui.handlers">
      <handler
            class="sinbad2.core.undoable.handler.RedoOperationHandler"
            commandId="flintstones.core.redo">
         <enabledWhen>
            <with
                  variable="flintstones.ui.redo.state">
               <equals
                     value="ENABLED">
               </equals>
            </with>
         </enabledWhen>
      </handler>
      <handler
            class="sinbad2.core.undoable.handler.UndoOperationHandler"
            commandId="flintstones.core.undo">
         <enabledWhen>
            <with
                  variable="flintstones.ui.undo.state">
               <equals
                     value="ENABLED">
               </equals>
            </with>
         </enabledWhen>
      </handler>
      <handler
            class="sinbad2.core.io.handler.NewHandler"
            commandId="flintstones.core.io.new">
      </handler>
      <handler
            class="sinbad2.core.ui.io.handler.ReadHandler"
            commandId="flintstones.core.ui.io.read">
      </handler>
      <handler
            class="sinbad2.core.ui.io.handler.SaveHandler"
            commandId="flintstones.core.ui.io.save">
         <enabledWhen>
            <with
                  variable="flintstones.ui.io.save.state">
               <equals
                     value="ENABLED">
               </equals>
            </with>
         </enabledWhen>
      </handler>
      <handler
            class="sinbad2.core.ui.io.handler.SaveAsHandler"
            commandId="flintstones.core.ui.io.save.as">
      </handler>
      <handler
            class="sinbad2.core.ui.io.handler.SaveAndCloseHandler"
            commandId="flintstones.core.ui.io.save.and.close">
      </handler>
   </extension>
   <extension
         point="org.eclipse.core.expressions.definitions">
      <definition
            id="oneElementSelected">
         <with
               variable="selection">
            <count
                  value="1">
            </count>
         </with>
      </definition>
   </extension>
   <extension
         point="org.eclipse.ui.commandImages">
      <image
            commandId="flintstones.core.io.new"
            icon="icons/new_16.png">
      </image>
      <image
            commandId="flintstones.core.ui.io.read"
            icon="icons/read_16.png">
      </image>
      <image
            commandId="flintstones.core.ui.io.save"
            icon="icons/save_16.png">
      </image>
      <image
            commandId="flintstones.core.ui.io.save.as"
            icon="icons/save-as_16.png">
      </image>
      <image
            commandId="flintstones.core.ui.io.save.and.close"
            icon="bin/save-and-close_16.png">
      </image>
      <image
            commandId="org.eclipse.ui.file.exit"
            icon="icons/exit_16.png">
      </image>
      <image
            commandId="flintstones.core.undo"
            disabledIcon="platform:/plugin/org.eclipse.ui/icons/full/dtool16/undo_edit.gif"
            icon="platform:/plugin/org.eclipse.ui/icons/full/etool16/undo_edit.gif">
      </image>
      <image
            commandId="flintstones.core.redo"
            disabledIcon="platform:/plugin/org.eclipse.ui/icons/full/dtool16/redo_edit.gif"
            icon="platform:/plugin/org.eclipse.ui/icons/full/etool16/redo_edit.gif">
      </image>
   </extension>
   <extension
         point="org.eclipse.ui.services">
      <sourceProvider
            provider="sinbad2.core.ui.undoable.UndoableSourceProvider">
         <variable
               name="flintstones.ui.undo.state"
               priorityLevel="workbench">
         </variable>
         <variable
               name="flintstones.ui.redo.state"
               priorityLevel="workbench">
         </variable>
      </sourceProvider>
      <sourceProvider
            provider="sinbad2.core.ui.workspace.WorkspaceSourceProvider">
         <variable
               name="flintstones.ui.io.save.state"
               priorityLevel="workbench">
         </variable>
      </sourceProvider>
   </extension>
   <extension
         point="org.eclipse.ui.contexts">
      <context
            id="flintstones.core.ui"
            name="%flintstones.ui.context.name"
            parentId="org.eclipse.ui.contexts.window">
      </context>
   </extension>
   <extension
         point="org.eclipse.ui.bindings">
      <key
            commandId="flintstones.core.io.new"
            contextId="flintstones.core.ui"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+N">
      </key>
      <key
            commandId="flintstones.core.ui.io.read"
            contextId="flintstones.core.ui"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+O">
      </key>
      <key
            commandId="flintstones.core.ui.io.save"
            contextId="flintstones.core.ui"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+S">
      </key>
      <key
            commandId="flintstones.core.ui.io.save.as"
            contextId="flintstones.core.ui"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+M2+S">
      </key>
      <key
            commandId="flintstones.core.ui.io.save.and.close"
            contextId="flintstones.core.ui"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+W">
      </key>
      <key
            commandId="flintstones.core.undo"
            contextId="flintstones.core.ui"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+Z">
      </key>
      <key
            commandId="flintstones.core.redo"
            contextId="flintstones.core.ui"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+M2+Z">
      </key>
      <key
            commandId="org.eclipse.ui.window.preferences"
            contextId="flintstones.core.ui"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+M2+P">
      </key>
      <key
            commandId="org.eclipse.ui.file.exit"
            contextId="flintstones.core.ui"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+Q">
      </key>
   </extension>

</plugin>
